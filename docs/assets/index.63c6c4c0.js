var Rt=Object.defineProperty,Vt=Object.defineProperties;var Ut=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var Mt=Object.prototype.hasOwnProperty,Gt=Object.prototype.propertyIsEnumerable;var ht=(n,e,a)=>e in n?Rt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,D=(n,e)=>{for(var a in e||(e={}))Mt.call(e,a)&&ht(n,a,e[a]);if(pt)for(var a of pt(e))Gt.call(e,a)&&ht(n,a,e[a]);return n},K=(n,e)=>Vt(n,Ut(e));import{f as qt,i as Wt,g as _t,h as t,t as mt,a as Xt,b as Ht,s as u,c as A,u as gt,e as ft,d as Jt,j as P,l as I,k as Z,m as Kt,n as Zt,o as Qt,p as te,q as vt,r as ee,z as se,v as O,w as Q,x as wt,y as yt,A as bt,B as Ct,C as tt,D as xt,E as $,F as ne}from"./vendor.49031358.js";const ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function a(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(o){if(o.ep)return;o.ep=!0;const i=a(o);fetch(o.href,i)}};ae();const oe="_app_1v48h_1",ce="_footer_1v48h_20";var ie={app:oe,footer:ce};const le="_dateLabel_g50nu_1",re="_counter_g50nu_21",de="_totalLabel_g50nu_1",ue="_newCases_g50nu_1",pe="_deathLabel_g50nu_1",he="_newDeaths_g50nu_1",_e="_deathSwitch_g50nu_1",me="_caseSwitch_g50nu_1",ge="_circle_g50nu_58",fe="_sliderAxis_g50nu_63",ve="_axis_g50nu_67",we="_calAxis_g50nu_71",ye="_switches_g50nu_75",be="_selected_g50nu_84",Ce="_legend_g50nu_88",xe="_legends_g50nu_1",Le="_legendLabel_g50nu_98",Se="_control_g50nu_103",De="_label_g50nu_107",$e="_controls_g50nu_1",ke="_calendarLabel_g50nu_115",Ee="_cal_g50nu_71",Ne="_calendar_g50nu_115",Ae="_calendarContainer_g50nu_1",Pe="_slider_g50nu_63",Ie="_button_g50nu_135",Oe="_mapContainer_g50nu_1",je="_playback_g50nu_1",Te="_playContainer_g50nu_1",ze="_map_g50nu_1",Ye="_mapSvg_g50nu_1",Be="_title_g50nu_1",Fe="_popup_g50nu_1",Re="_popupLabel_g50nu_1";var s={dateLabel:le,counter:re,totalLabel:de,newCases:ue,deathLabel:pe,newDeaths:he,deathSwitch:_e,caseSwitch:me,circle:ge,sliderAxis:fe,axis:ve,calAxis:we,switches:ye,selected:be,legend:Ce,legends:xe,legendLabel:Le,control:Se,label:De,controls:$e,calendarLabel:ke,cal:Ee,calendar:Ne,calendarContainer:Ae,slider:Pe,button:Ie,mapContainer:Oe,playback:je,playContainer:Te,map:ze,mapSvg:Ye,title:Be,popup:Fe,popupLabel:Re};const Ve="modulepreload",Lt={},Ue="/",St=function(e,a){return!a||a.length===0?e():Promise.all(a.map(c=>{if(c=`${Ue}${c}`,c in Lt)return;Lt[c]=!0;const o=c.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${i}`))return;const p=document.createElement("link");if(p.rel=o?"stylesheet":Ve,o||(p.as="script",p.crossOrigin=""),p.href=c,document.head.appendChild(p),o)return new Promise((f,w)=>{p.addEventListener("load",f),p.addEventListener("error",w)})})).then(()=>e())},Me=qt(",d"),M=(n,e)=>{const a=Wt(parseInt(n),parseInt(e));return function(c){this.textContent=Me(a(c))}},Dt=_t(),Ge=({attributes:{d:n,eventListeners:e}})=>t("path",{className:"states",stroke:"#ccc","stroke-width":1,"stroke-linejoin":"round","vector-effect":"non-scaling-stroke",fill:"none",d:Dt(n),eventListeners:e}),qe=({attributes:{d:n,eventListeners:e}})=>t("path",{className:"counties","vector-effect":"non-scaling-stroke",stroke:"none",fill:n.fill||"",d:Dt(n.feature)||"",eventListeners:e}),$t=()=>t("div",{id:s.popup},t("p",{id:s.populLabel})),We="%m-%d-%Y",Xe=mt(We),He=Xe("1-22-2020"),Je=new Date,j=Xt.range(He,Je),G=j.length*6,Ke=100,Ze=[0,0,G,Ke],Qe={viewBox:Ze,id:s.slider};var g=-1;const ts=({attributes:{eventListener:n}})=>{const e=gt().domain(ft(j)).range([0,G]),a=u(t("svg",K(D({},Qe),{eventListener:["click",function(o){const i=this.createSVGPoint();i.x=o.clientX,i.y=o.clientY;const p=i.matrixTransform(this.getScreenCTM().inverse()),f=e.invert(p.x);g=Jt(j,f);const w=P().ease(I),E={detail:{counter:g,t:w}};window.dispatchEvent(new CustomEvent("tick",E)),u("circle").transition(w).attr("cx",g*6)}]}))),c=a.append(()=>t("g",null));return c.append(()=>t("g",{transform:"translate(0, 44)",className:s.sliderAxis})).call(Z(e).tickSize(0).ticks(12)),c.insert(()=>t("circle",{transform:"translate(0, 44)",className:s.circle,r:12})).call(Kt().on("drag",function(o){u(this).attr("cx",()=>{const i=o.x;if(i<0)return 0;if(i>G)return G;const p=parseInt(i/6);return n(p),i})})),a.node()},es=()=>{let n="stop";return Ht(()=>{if(n=="start"&&g<=j.length){g++;const e=P().duration(500).ease(I);u("circle").transition(e).attr("cx",g*6);const a={detail:{t:e,counter:g}};window.dispatchEvent(new CustomEvent("tick",a))}g>j.length&&(n="stop",u(`.${s.button}`).text(n=="start"?"stop":"start"))},500),t(A,null,t("div",{id:s.controls},t("div",{id:s.startContainer},t("button",{className:s.button,eventListener:["click",function(){n=n=="start"?"stop":"start",u(this).text(n=="start"?"stop":"start")}]},"start")),t(ts,{eventListener:e=>{n="stop",u(`.${s.button}`).text(n=="start"?"stop":"start"),g=e;const c={detail:{counter:g,t:null}};window.dispatchEvent(new CustomEvent("tick",c))}})),t("div",{id:s.calendarContainer}))},ss=n=>{g=n;const e=P().ease(I),a={detail:{counter:g,t:e}};window.dispatchEvent(new CustomEvent("tick",a)),u("circle").transition(e).attr("cx",g*6)},ns=Zt("%m/%d/%y");let et;const as={eventListeners:[["mouseleave",n=>u(st).transition().style("opacity",0)],["mouseover",function(n){const e=u(this),a=this.getBoundingClientRect(),[[c,o]]=e.data();u(st).transition().duration(0).style("opacity",.75).style("top",`${a.top+window.scrollY-72}px`).style("left",`${a.left+32}px`).select("p").text(`${ns(c)} : ${o}`)}],["click",function(){const n=u(this),[[e,a]]=n.data(),c=ee(et,e);ss(c)}]]},st=t($t,null);document.body.appendChild(st);const q=18.5,kt=q*8,os=["Sun","Mon","Tue","Wed","Th","Fri","Sat"],cs=Qt().domain(os).range([0,129]),is=te(cs).tickSize(0).ticks(7),Et=({children:n,attributes:{d:e,color:a}})=>{et=e.map(([b,y])=>b);const c=ft(et),i=(vt.count(...c)+1)*q+40,f=u(t("svg",K(D({},{width:i,height:kt,viewBox:[0,0,i,kt]}),{className:s.calendar}))),w=f.append(()=>t("g",{transform:"translate(36, 0)"})),E=gt().domain(c).range([0,i-40]),it=Z(E).tickSize(0).ticks(12);f.append(()=>t("g",{transform:"translate(34, 0)",className:s.calAxis})).call(is).select(".domain").remove(),f.append(()=>t("g",{transform:"translate(36, 132)",className:s.calAxis})).call(it).select(".domain").remove();const T=(b,y)=>{w.selectAll("rect").data(b,([v,_])=>v).join(v=>v.append(([_,z])=>t("rect",D({fill:a(z),width:18,height:18,x:vt.count(c[0],_)*q,y:_.getDay()*q},as))).call(_=>(y!=null?_.transition(y).attr("opacity",1):_.attr("opacity",1),_)),v=>v,v=>v.call(_=>_.transition(y).attr("opacity",0).remove()))};return T([]),window.addEventListener("tick",b=>{const y=b.detail.counter+1,v=b.detail.t,_=[...e];_.splice(y),T(_,v)}),t(A,null,t("div",{className:s.calendarLabel},n),f.node())},ls=_t(),nt=975,at=610,rs=[1,1e5],ot=mt("%m/%d/%y"),ct=t($t,null);document.body.appendChild(ct);const ds={viewBox:[0,0,nt,at],id:s.mapSvg},W=u(t("svg",D({},ds))),X=W.append("g"),us=({transform:n})=>{X.attr("transform",n)},Nt=se().scaleExtent([1,12]).on("zoom",us);W.call(Nt);const ps={eventListeners:[["click",function(n){const a=u(this).data()[0].feature,[[c,o],[i,p]]=ls.bounds(a);W.transition().duration(750).call(Nt.transform,ne.translate(nt/2,at/2).scale(Math.min(8,.9/Math.max((i-c)/nt,(p-o)/at))).translate(-(c+i)/2,-(o+p)/2))}],["mouseleave",n=>u(ct).transition().style("opacity",0)],["mouseover",function(n){const[e]=u(this).data();u(ct).transition().duration(0).style("opacity",.75).style("top",`${n.clientY-100}px`).style("left",`${n.clientX+24}px`).select("p").text(e.label)}]]};(async()=>{const{default:n}=await St(()=>import("./population.fd569703.js"),[]),{default:e}=await St(()=>import("./counties-albers-10m.4f8a6ef5.js"),[]);let a="cases",c=0;const o=O(tt).domain(rs),i=O(Q).domain([1,1e3]),p=(l,d)=>{X.selectAll("path.counties").data(l,r=>r.id).join(r=>r.append(h=>t(qe,D({d:h,fill:a=="cases"?h.fill:h.deathFill},ps))),r=>r.call(h=>h.transition(d).style("fill",m=>a=="cases"?m.fill:m.deathFill).style("stroke",m=>a=="cases"?m.fill:m.deathFill)),r=>r.call(h=>h.transition(d).style("opacity",0).remove()))},f=P().ease(I);p([],f);const w=wt(e,e.objects.states).features;X.selectAll("path.states").data(w,l=>l.properties.name).join(l=>l.append(d=>t(Ge,{d,eventListeners:[["click",r=>console.log(r)]]})));const E=wt(e,e.objects.counties).features,T=await(await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")).text(),y=await(await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv")).text(),v=n.slice(1).map(([l,d,r])=>[`${d}${r}`,+l]),_=new Map(v),z=yt(T),Pt=yt(y),It=bt(E,l=>l.id),Ot=z[0],lt=Object.keys(Ot).filter(ot),jt=bt(Pt,l=>l.UID.slice(3)),H=lt.map(l=>[l,z.map(d=>{const r=d.UID.slice(3),h=+d[l]||0,m=+_.get(r)||0,C=(It.get(r)||[])[0]||{properties:{}},N=C.properties.name,x=h/m*1e5,L=d.Province_State,S=`${N} County, ${L}`,J=o(x),V=+jt.get(r)[0][l]||0,U=V/m*1e5,Ft=i(U);return{id:r,cases:x,feature:C,label:S,state:L,pop:m,total:h,fill:J,totalDeaths:V,deathsPerCap:U,deathFill:Ft}})]),Tt=lt.map(ot),Y=[],B=[],F=[],R=[],rt=[],dt=[];H.forEach((l,d)=>{const r=Ct(l[1],S=>S.total),h=Ct(l[1],S=>S.totalDeaths);Y.push(r),R.push(h);const m=Y[d-1]||0,C=r-m;B.push(C);const N=R[d-1]||0,x=h-N;F.push(x);const L=Tt[d];rt.push([L,C]),dt.push([L,x])});const ut=(l,d)=>{const r=H[l],h=ot(r[0]).toLocaleDateString(),m=$(`#${s.dateLabel}`).text(),C=Y[l-1]||0,N=Y[l]||0,x=B[l]||0,L=B[l-1]||0,S=R[l-1]||0,J=R[l]||0,V=F[l]||0,U=F[l-1]||0;return h!=m&&($(`#${s.dateLabel}`).text(h),$(`#${s.totalLabel}`).transition(d).tween("text",()=>M(C,N)),$(`#${s.deathLabel}`).transition(d).tween("text",()=>M(S,J)),$(`#${s.newDeaths}`).transition(d).tween("text",()=>M(U,V)),$(`#${s.newCases}`).transition(d).tween("text",()=>M(L,x))),r[1]};p(ut(0,f),f),X.selectAll("path.states").raise(),window.addEventListener("tick",l=>{const d=l.detail.counter;if(d>=H.length)return;c=d;const r=l.detail.t,h=ut(d,r);p(h,r)}),window.addEventListener("toggle",l=>{a=l.detail.state;const d=P().ease(I),r={detail:{counter:c,t:d}};window.dispatchEvent(new CustomEvent("tick",r))});const zt=O(tt).domain([1,xt(B)]),Yt=O(Q).domain([1,xt(F)]),Bt=()=>t(A,null,t("div",{className:s.cal},t(Et,{d:rt,color:zt},t("label",null,"new cases"),t("h1",{id:s.newCases},"0"))),t("div",{className:s.cal},t(Et,{d:dt,color:Yt},t("label",null,"new deaths"),t("h1",{id:s.newDeaths},"0"))));u(`#${s.calendarContainer}`).append(()=>t(Bt,null))})();var hs=t(A,null,W.node());const _s=n=>{const e=320,a=document.createElement("canvas"),c=a.getContext("2d");a.style.width=320,a.style.height=44;for(let o=0;o<e;++o)c.fillStyle=n(o/(e-1)),c.fillRect(o,0,1,44);return a},At=({attributes:{domain:n,width:e,color:a,label:c}})=>{const o=u(t("svg",{className:s.legend,viewBox:[0,0,320,44]}));o.append(()=>t("image",{x:0,y:0,width:e,height:44,preserveAspectRatio:"none",href:_s(a).toDataURL()}));const i=O(a).domain(n).range([0,e]).nice();return o.append(()=>t("g",{transform:"translate(0, 20)",className:s.axis})).call(Z(i).ticks(5,"~s")),o.append(()=>t("g",{transform:"translate(0, -8)"})).append(()=>t("text",{className:s.legendLabel})).text(c),o.node()};let k="cases";const ms=()=>t(A,null,t("div",{id:s.map},t("div",{id:s.legends},t("div",{className:s.counter},t("h1",{id:s.title},"COVIZ-19"),t("label",null,"total cases"),t("h1",{id:s.totalLabel},"0"),t("label",null,"total deaths"),t("h1",{id:s.deathLabel},"0")),t("div",{className:s.control},t("button",{id:s.caseSwitch,className:`${s.switches} ${s.selected}`,eventListener:["click",function(){k!="cases"&&(k="cases",u(this).classed(s.selected,!0),u(`#${s.deathSwitch}`).classed(s.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:k}})))}]},t("h1",null,"Cases")),t(At,{domain:[1,1e5],width:320,color:tt,label:"COVID-19 cases per 100k"})),t("div",{className:s.control},t("button",{id:s.deathSwitch,className:`${s.switches}`,eventListener:["click",function(){k!="deaths"&&(k="deaths",u(this).classed(s.selected,!0),u(`#${s.caseSwitch}`).classed(s.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:k}})))}]},t("h1",null,"Deaths")),t(At,{domain:[1,1e3],width:320,color:Q,label:"COVID-19 deaths per 100k"}))),t("div",{id:s.mapContainer},hs)),t("div",{id:s.playback},t("h1",{id:s.dateLabel},"1/22/2020"),t(es,null))),gs="_footer_1ud2w_3";var fs={footer:gs};const vs="https://github.com/ScottORLY/coviz19",ws="https://github.com/CSSEGISandData/COVID-19",ys="https://api.census.gov/data/2018/pep/population?get=POP&for=county",bs=()=>t("div",{className:fs.footer},t("p",null,"created by ",t("a",{href:vs},"Scott Orlyck")),t("h4",null,"Data:"),t("p",null,t("a",{href:ws},"COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University")),t("p",null,t("a",{href:ys},"US Census")));document.body.appendChild(t("div",{id:ie.app},t(ms,null),t(bs,null)));
