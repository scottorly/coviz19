var Ft=Object.defineProperty,Rt=Object.defineProperties;var Vt=Object.getOwnPropertyDescriptors;var pt=Object.getOwnPropertySymbols;var Ut=Object.prototype.hasOwnProperty,Mt=Object.prototype.propertyIsEnumerable;var ht=(a,e,n)=>e in a?Ft(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,D=(a,e)=>{for(var n in e||(e={}))Ut.call(e,n)&&ht(a,n,e[n]);if(pt)for(var n of pt(e))Mt.call(e,n)&&ht(a,n,e[n]);return a},K=(a,e)=>Rt(a,Vt(e));import{f as Gt,i as Wt,g as mt,h as t,t as _t,a as Xt,b as Ht,s as u,c as N,u as ft,e as vt,d as Jt,j as P,l as I,k as Z,m as Kt,n as Zt,o as Qt,p as te,q as wt,r as ee,z as se,v as O,w as Q,x as gt,y as yt,A as bt,B as Ct,C as tt,D as xt,E as $,F as ae}from"./vendor.49031358.js";const ne=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}};ne();const oe="_app_1v48h_1",ce="_footer_1v48h_20";var le={app:oe,footer:ce};const ie="_dateLabel_1u8aq_1",re="_counter_1u8aq_21",de="_totalLabel_1u8aq_1",ue="_newCases_1u8aq_1",pe="_deathLabel_1u8aq_1",he="_newDeaths_1u8aq_1",me="_deathSwitch_1u8aq_1",_e="_caseSwitch_1u8aq_1",fe="_circle_1u8aq_58",ve="_axis_1u8aq_63",we="_calAxis_1u8aq_67",ge="_switches_1u8aq_71",ye="_selected_1u8aq_80",be="_legend_1u8aq_84",Ce="_legends_1u8aq_1",xe="_legendLabel_1u8aq_94",Le="_control_1u8aq_99",Se="_label_1u8aq_103",De="_controls_1u8aq_1",$e="_calendarLabel_1u8aq_111",ke="_cal_1u8aq_67",qe="_calendar_1u8aq_111",Ee="_calendarContainer_1u8aq_1",Ne="_slider_1u8aq_1",Pe="_button_1u8aq_131",Ie="_mapContainer_1u8aq_1",Oe="_playback_1u8aq_1",Ae="_playContainer_1u8aq_1",je="_map_1u8aq_1",Te="_mapSvg_1u8aq_1",ze="_title_1u8aq_1",Ye="_popup_1u8aq_1",Be="_popupLabel_1u8aq_1";var s={dateLabel:ie,counter:re,totalLabel:de,newCases:ue,deathLabel:pe,newDeaths:he,deathSwitch:me,caseSwitch:_e,circle:fe,axis:ve,calAxis:we,switches:ge,selected:ye,legend:be,legends:Ce,legendLabel:xe,control:Le,label:Se,controls:De,calendarLabel:$e,cal:ke,calendar:qe,calendarContainer:Ee,slider:Ne,button:Pe,mapContainer:Ie,playback:Oe,playContainer:Ae,map:je,mapSvg:Te,title:ze,popup:Ye,popupLabel:Be};const Fe="modulepreload",Lt={},Re="/",St=function(e,n){return!n||n.length===0?e():Promise.all(n.map(c=>{if(c=`${Re}${c}`,c in Lt)return;Lt[c]=!0;const o=c.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const p=document.createElement("link");if(p.rel=o?"stylesheet":Fe,o||(p.as="script",p.crossOrigin=""),p.href=c,document.head.appendChild(p),o)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",g)})})).then(()=>e())},Ve=Gt(",d"),U=(a,e)=>{const n=Wt(parseInt(a),parseInt(e));return function(c){this.textContent=Ve(n(c))}},Dt=mt(),Ue=({attributes:{d:a,eventListeners:e}})=>t("path",{className:"states",stroke:"#ccc","stroke-width":1,"stroke-linejoin":"round","vector-effect":"non-scaling-stroke",fill:"none",d:Dt(a),eventListeners:e}),Me=({attributes:{d:a,eventListeners:e}})=>t("path",{className:"counties","vector-effect":"non-scaling-stroke",stroke:"none",fill:a.fill||"",d:Dt(a.feature)||"",eventListeners:e}),$t=()=>t("div",{id:s.popup},t("p",{id:s.populLabel})),Ge="%m-%d-%Y",We=_t(Ge),Xe=We("1-22-2020"),He=new Date,A=Xt.range(Xe,He),M=A.length*6,Je=100,Ke=[0,0,M,Je],Ze={viewBox:Ke,id:s.slider};var f=-1;const Qe=({attributes:{eventListener:a}})=>{const e=ft().domain(vt(A)).range([0,M]),n=u(t("svg",K(D({},Ze),{eventListener:["click",function(o){const l=this.createSVGPoint();l.x=o.clientX,l.y=o.clientY;const p=l.matrixTransform(this.getScreenCTM().inverse()),v=e.invert(p.x);f=Jt(A,v);const g=P().ease(I),q={detail:{counter:f,t:g}};window.dispatchEvent(new CustomEvent("tick",q)),u("circle").transition(g).attr("cx",f*6)}]}))),c=n.append(()=>t("g",null));return c.append(()=>t("g",{transform:"translate(0, 44)",className:s.axis})).call(Z(e).tickSize(0).ticks(12)),c.insert(()=>t("circle",{transform:"translate(0, 44)",className:s.circle,r:12})).call(Kt().on("drag",function(o){u(this).attr("cx",()=>{const l=o.x;if(l<0)return 0;if(l>M)return M;const p=parseInt(l/6);return a(p),l})})),n.node()},ts=()=>{let a="stop";return Ht(()=>{if(a=="start"&&f<=A.length){f++;const e=P().duration(500).ease(I);u("circle").transition(e).attr("cx",f*6);const n={detail:{t:e,counter:f}};window.dispatchEvent(new CustomEvent("tick",n))}f>A.length&&(a="stop",u(`.${s.button}`).text(a=="start"?"stop":"start"))},500),t(N,null,t("div",{id:s.controls},t("div",{id:s.startContainer},t("button",{className:s.button,eventListener:["click",function(){a=a=="start"?"stop":"start",u(this).text(a=="start"?"stop":"start")}]},"start")),t(Qe,{eventListener:e=>{a="stop",u(`.${s.button}`).text(a=="start"?"stop":"start"),f=e;const c={detail:{counter:f,t:null}};window.dispatchEvent(new CustomEvent("tick",c))}})),t("div",{id:s.calendarContainer}))},es=a=>{f=a;const e=P().ease(I),n={detail:{counter:f,t:e}};window.dispatchEvent(new CustomEvent("tick",n)),u("circle").transition(e).attr("cx",f*6)},ss=Zt("%m/%d/%y");let et;const as={eventListeners:[["mouseleave",a=>u(st).transition().style("opacity",0)],["mouseover",function(a){const e=u(this),n=this.getBoundingClientRect(),[[c,o]]=e.data();u(st).transition().duration(0).style("opacity",.75).style("top",`${n.top+window.scrollY-72}px`).style("left",`${n.left+32}px`).select("p").text(`${ss(c)} : ${o}`)}],["click",function(){const a=u(this),[[e,n]]=a.data(),c=ee(et,e);es(c)}]]},st=t($t,null);document.body.appendChild(st);const G=18.5,kt=G*8,ns=["Sun","Mon","Tue","Wed","Th","Fri","Sat"],os=Qt().domain(ns).range([0,129]),cs=te(os).tickSize(0).ticks(7),qt=({children:a,attributes:{d:e,color:n}})=>{et=e.map(([b,y])=>b);const c=vt(et),l=(wt.count(...c)+1)*G+40,v=u(t("svg",K(D({},{width:l,height:kt,viewBox:[0,0,l,kt]}),{className:s.calendar}))),g=v.append(()=>t("g",{transform:"translate(36, 0)"})),q=ft().domain(c).range([0,l-40]),lt=Z(q).tickSize(0).ticks(12);v.append(()=>t("g",{transform:"translate(34, 0)",className:s.calAxis})).call(cs).select(".domain").remove(),v.append(()=>t("g",{transform:"translate(36, 132)",className:s.calAxis})).call(lt).select(".domain").remove();const j=(b,y)=>{g.selectAll("rect").data(b,([w,m])=>w).join(w=>w.append(([m,T])=>t("rect",D({fill:n(T),width:18,height:18,x:wt.count(c[0],m)*G,y:m.getDay()*G},as))).call(m=>(y!=null?m.transition(y).attr("opacity",1):m.attr("opacity",1),m)),w=>w,w=>w.call(m=>m.transition(y).attr("opacity",0).remove()))};return j([]),window.addEventListener("tick",b=>{const y=b.detail.counter+1,w=b.detail.t,m=[...e];m.splice(y),j(m,w)}),t(N,null,t("div",{className:s.calendarLabel},a),v.node())},ls=mt(),at=975,nt=610,is=[1,1e5],ot=_t("%m/%d/%y"),ct=t($t,null);document.body.appendChild(ct);const rs={viewBox:[0,0,at,nt],id:s.mapSvg},W=u(t("svg",D({},rs))),X=W.append("g"),ds=({transform:a})=>{X.attr("transform",a)},Et=se().scaleExtent([1,12]).on("zoom",ds);W.call(Et);const us={eventListeners:[["click",function(a){const n=u(this).data()[0].feature,[[c,o],[l,p]]=ls.bounds(n);W.transition().duration(750).call(Et.transform,ae.translate(at/2,nt/2).scale(Math.min(8,.9/Math.max((l-c)/at,(p-o)/nt))).translate(-(c+l)/2,-(o+p)/2))}],["mouseleave",a=>u(ct).transition().style("opacity",0)],["mouseover",function(a){const[e]=u(this).data();u(ct).transition().duration(0).style("opacity",.75).style("top",`${a.clientY-100}px`).style("left",`${a.clientX+24}px`).select("p").text(e.label)}]]};(async()=>{const{default:a}=await St(()=>import("./population.fd569703.js"),[]),{default:e}=await St(()=>import("./counties-albers-10m.4f8a6ef5.js"),[]);let n="cases",c=0;const o=O(tt).domain(is),l=O(Q).domain([1,1e3]),p=(i,d)=>{X.selectAll("path.counties").data(i,r=>r.id).join(r=>r.append(h=>t(Me,D({d:h,fill:n=="cases"?h.fill:h.deathFill},us))),r=>r.call(h=>h.transition(d).style("fill",_=>n=="cases"?_.fill:_.deathFill).style("stroke",_=>n=="cases"?_.fill:_.deathFill)),r=>r.call(h=>h.transition(d).style("opacity",0).remove()))},v=P().ease(I);p([],v);const g=gt(e,e.objects.states).features;X.selectAll("path.states").data(g,i=>i.properties.name).join(i=>i.append(d=>t(Ue,{d,eventListeners:[["click",r=>console.log(r)]]})));const q=gt(e,e.objects.counties).features,j=await(await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv")).text(),y=await(await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv")).text(),w=a.slice(1).map(([i,d,r])=>[`${d}${r}`,+i]),m=new Map(w),T=yt(j),Pt=yt(y),It=bt(q,i=>i.id),Ot=T[0],it=Object.keys(Ot).filter(ot),At=bt(Pt,i=>i.UID.slice(3)),H=it.map(i=>[i,T.map(d=>{const r=d.UID.slice(3),h=+d[i]||0,_=+m.get(r)||0,C=(It.get(r)||[])[0]||{properties:{}},E=C.properties.name,x=h/_*1e5,L=d.Province_State,S=`${E} County, ${L}`,J=o(x),R=+At.get(r)[0][i]||0,V=R/_*1e5,Bt=l(V);return{id:r,cases:x,feature:C,label:S,state:L,pop:_,total:h,fill:J,totalDeaths:R,deathsPerCap:V,deathFill:Bt}})]),jt=it.map(ot),z=[],Y=[],B=[],F=[],rt=[],dt=[];H.forEach((i,d)=>{const r=Ct(i[1],S=>S.total),h=Ct(i[1],S=>S.totalDeaths);z.push(r),F.push(h);const _=z[d-1]||0,C=r-_;Y.push(C);const E=F[d-1]||0,x=h-E;B.push(x);const L=jt[d];rt.push([L,C]),dt.push([L,x])});const ut=(i,d)=>{const r=H[i],h=ot(r[0]).toLocaleDateString(),_=$(`#${s.dateLabel}`).text(),C=z[i-1]||0,E=z[i]||0,x=Y[i]||0,L=Y[i-1]||0,S=F[i-1]||0,J=F[i]||0,R=B[i]||0,V=B[i-1]||0;return h!=_&&($(`#${s.dateLabel}`).text(h),$(`#${s.totalLabel}`).transition(d).tween("text",()=>U(C,E)),$(`#${s.deathLabel}`).transition(d).tween("text",()=>U(S,J)),$(`#${s.newDeaths}`).transition(d).tween("text",()=>U(V,R)),$(`#${s.newCases}`).transition(d).tween("text",()=>U(L,x))),r[1]};p(ut(0,v),v),X.selectAll("path.states").raise(),window.addEventListener("tick",i=>{const d=i.detail.counter;if(d>=H.length)return;c=d;const r=i.detail.t,h=ut(d,r);p(h,r)}),window.addEventListener("toggle",i=>{n=i.detail.state;const d=P().ease(I),r={detail:{counter:c,t:d}};window.dispatchEvent(new CustomEvent("tick",r))});const Tt=O(tt).domain([1,xt(Y)]),zt=O(Q).domain([1,xt(B)]),Yt=()=>t(N,null,t("div",{className:s.cal},t(qt,{d:rt,color:Tt},t("label",null,"new cases"),t("h1",{id:s.newCases},"0"))),t("div",{className:s.cal},t(qt,{d:dt,color:zt},t("label",null,"new deaths"),t("h1",{id:s.newDeaths},"0"))));u(`#${s.calendarContainer}`).append(()=>t(Yt,null))})();var ps=t(N,null,W.node());const hs=a=>{const e=320,n=document.createElement("canvas"),c=n.getContext("2d");n.style.width=320,n.style.height=44;for(let o=0;o<e;++o)c.fillStyle=a(o/(e-1)),c.fillRect(o,0,1,44);return n},Nt=({attributes:{domain:a,width:e,color:n,label:c}})=>{const o=u(t("svg",{className:s.legend,viewBox:[0,0,320,44]}));o.append(()=>t("image",{x:0,y:0,width:e,height:44,preserveAspectRatio:"none",href:hs(n).toDataURL()}));const l=O(n).domain(a).range([0,e]).nice();return o.append(()=>t("g",{transform:"translate(0, 20)",className:s.axis})).call(Z(l).ticks(5,"~s")),o.append(()=>t("g",{transform:"translate(0, -8)"})).append(()=>t("text",{className:s.legendLabel})).text(c),o.node()};let k="cases";const ms=()=>t(N,null,t("div",{id:s.map},t("div",{id:s.legends},t("div",{className:s.counter},t("h1",{id:s.title},"COVIZ-19"),t("label",null,"total cases"),t("h1",{id:s.totalLabel},"0"),t("label",null,"total deaths"),t("h1",{id:s.deathLabel},"0")),t("div",{className:s.control},t("button",{id:s.caseSwitch,className:`${s.switches} ${s.selected}`,eventListener:["click",function(){k!="cases"&&(k="cases",u(this).classed(s.selected,!0),u(`#${s.deathSwitch}`).classed(s.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:k}})))}]},t("h1",null,"Cases")),t(Nt,{domain:[1,1e5],width:320,color:tt,label:"COVID-19 cases per 100k"})),t("div",{className:s.control},t("button",{id:s.deathSwitch,className:`${s.switches}`,eventListener:["click",function(){k!="deaths"&&(k="deaths",u(this).classed(s.selected,!0),u(`#${s.caseSwitch}`).classed(s.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:k}})))}]},t("h1",null,"Deaths")),t(Nt,{domain:[1,1e3],width:320,color:Q,label:"COVID-19 deaths per 100k"}))),t("div",{id:s.mapContainer},ps)),t("div",{id:s.playback},t("h1",{id:s.dateLabel},"1/22/2020"),t(ts,null))),_s="_footer_1ud2w_3";var fs={footer:_s};const vs="https://github.com/ScottORLY/coviz19",ws="https://github.com/CSSEGISandData/COVID-19",gs="https://api.census.gov/data/2018/pep/population?get=POP&for=county",ys=()=>t("div",{className:fs.footer},t("p",null,"created by ",t("a",{href:vs},"Scott Orlyck")),t("h4",null,"Data:"),t("p",null,t("a",{href:ws},"COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University")),t("p",null,t("a",{href:gs},"US Census")));document.body.appendChild(t("div",{id:le.app},t(ms,null),t(ys,null)));
