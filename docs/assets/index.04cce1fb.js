var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,l=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(n)for(var a of n(t))o.call(t,a)&&i(e,a,t[a]);return e},c=(e,n)=>t(e,a(n));"undefined"!=typeof require&&require;import{f as r,i as d,g as p,h,t as u,d as _,a as m,s as w,b as y,u as v,e as f,c as g,j as b,l as k,k as L,m as x,n as C,o as S,p as E,q as D,r as $,z as O,v as N,w as I,x as j,y as P,A,B as V,C as R,D as U,E as z,F as B}from"./vendor.bd5c114d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var F="_app_1v48h_1";var M={heading:"_heading_hokwy_9",dateLabel:"_dateLabel_hokwy_1",ping:"_ping_hokwy_1",counter:"_counter_hokwy_17",totalLabel:"_totalLabel_hokwy_1",newCases:"_newCases_hokwy_1",deathLabel:"_deathLabel_hokwy_1",newDeaths:"_newDeaths_hokwy_1",deathSwitch:"_deathSwitch_hokwy_1",caseSwitch:"_caseSwitch_hokwy_1",circle:"_circle_hokwy_54",axis:"_axis_hokwy_59",calAxis:"_calAxis_hokwy_63",switches:"_switches_hokwy_67",bounce:"_bounce_hokwy_1",selected:"_selected_hokwy_76",legend:"_legend_hokwy_80",legends:"_legends_hokwy_1",legendLabel:"_legendLabel_hokwy_90",control:"_control_hokwy_95",label:"_label_hokwy_99",controls:"_controls_hokwy_1",calendarLabel:"_calendarLabel_hokwy_107",cal:"_cal_hokwy_63",calendar:"_calendar_hokwy_107",calendarContainer:"_calendarContainer_hokwy_1",slider:"_slider_hokwy_1",button:"_button_hokwy_127",mapContainer:"_mapContainer_hokwy_1",playback:"_playback_hokwy_1",playContainer:"_playContainer_hokwy_1",map:"_map_hokwy_1",mapSvg:"_mapSvg_hokwy_1",title:"_title_hokwy_1",popup:"_popup_hokwy_1",popupLabel:"_popupLabel_hokwy_1"};const T={},q=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in T)return;T[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},Y=r(",d"),G=(e,t)=>{const a=d(parseInt(e),parseInt(t));return function(e){this.textContent=Y(a(e))}},W=p(),X=({attributes:{d:e,eventListeners:t}})=>h("path",{className:"states",stroke:"#ccc","stroke-width":1,"stroke-linejoin":"round","vector-effect":"non-scaling-stroke",fill:"none",d:W(e),eventListeners:t}),H=({attributes:{d:e,eventListeners:t}})=>h("path",{className:"counties","vector-effect":"non-scaling-stroke",stroke:"none",fill:e.fill||"",d:W(e.feature)||"",eventListeners:t}),J=()=>h("div",{id:M.popup},h("p",{id:M.populLabel})),K=u("%m-%d-%Y")("1-22-2020"),Z=new Date,Q=_.range(K,Z),ee=6*Q.length,te={viewBox:[0,0,ee,100],id:M.slider};var ae=-1;const ne=({attributes:{eventListener:e}})=>{const t=v().domain(f(Q)).range([0,ee]),a=w(h("svg",c(l({},te),{eventListener:["click",function(e){const a=this.createSVGPoint();a.x=e.clientX,a.y=e.clientY;const n=a.matrixTransform(this.getScreenCTM().inverse()),s=t.invert(n.x);ae=g(Q,s);const o=b().ease(k),i={detail:{counter:ae,t:o}};window.dispatchEvent(new CustomEvent("tick",i)),w("circle").transition(o).attr("cx",6*ae)}]}))),n=a.append((()=>h("g",null)));return n.append((()=>h("g",{transform:"translate(0, 44)",className:M.axis}))).call(L(t).tickSize(0).ticks(12)),n.insert((()=>h("circle",{transform:"translate(0, 44)",className:M.circle,r:12}))).call(x().on("drag",(function(t){w(this).attr("cx",(()=>{const a=t.x;if(a<0)return 0;if(a>ee)return ee;const n=parseInt(a/6);return e(n),a}))}))),a.node()},se=()=>{let e="stop";return m((()=>{if("start"==e&&ae<=Q.length){ae++;const e=b().duration(500).ease(k);w("circle").transition(e).attr("cx",6*ae);const t={detail:{t:e,counter:ae}};window.dispatchEvent(new CustomEvent("tick",t))}ae>Q.length&&(e="stop",w(`.${M.button}`).text("start"==e?"stop":"start"))}),500),h(y,null,h("div",{id:M.controls},h("div",{id:M.startContainer},h("button",{className:M.button,eventListener:["click",function(){e="start"==e?"stop":"start",w(this).text("start"==e?"stop":"start")}]},"start")),h(ne,{eventListener:t=>{e="stop",w(`.${M.button}`).text("start"==e?"stop":"start");const a={detail:{counter:ae=t,t:null}};window.dispatchEvent(new CustomEvent("tick",a))}})),h("div",{id:M.calendarContainer}))},oe=C("%m/%d/%y");let ie;const le={eventListeners:[["mouseleave",e=>w(ce).transition().style("opacity",0)],["mouseover",function(e){const t=w(this),a=this.getBoundingClientRect(),[[n,s]]=t.data();w(ce).transition().duration(0).style("opacity",.75).style("top",a.top+window.scrollY-72+"px").style("left",`${a.left+32}px`).select("p").text(`${oe(n)} : ${s}`)}],["click",function(){const e=w(this),[[t,a]]=e.data();(e=>{ae=e;const t=b().ease(k),a={detail:{counter:ae,t:t}};window.dispatchEvent(new CustomEvent("tick",a)),w("circle").transition(t).attr("cx",6*ae)})($(ie,t))}]]},ce=h(J,null);document.body.appendChild(ce);const re=E(S().domain(["Sun","Mon","Tue","Wed","Th","Fri","Sat"]).range([0,129])).tickSize(0).ticks(7),de=({children:e,attributes:{d:t,color:a}})=>{ie=t.map((([e,t])=>e));const n=f(ie),s=18.5*(D.count(...n)+1)+40,o=w(h("svg",c(l({},{width:s,height:148,viewBox:[0,0,s,148]}),{className:M.calendar}))),i=o.append((()=>h("g",{transform:"translate(36, 0)"}))),r=v().domain(n).range([0,s-40]),d=L(r).tickSize(0).ticks(12);o.append((()=>h("g",{transform:"translate(34, 0)",className:M.calAxis}))).call(re).select(".domain").remove(),o.append((()=>h("g",{transform:"translate(36, 132)",className:M.calAxis}))).call(d).select(".domain").remove();const p=(e,t)=>{i.selectAll("rect").data(e,(([e,t])=>e)).join((e=>e.append((([e,t])=>h("rect",l({fill:a(t),width:18,height:18,x:18.5*D.count(n[0],e),y:18.5*e.getDay()},le)))).call((e=>(null!=t?e.transition(t).attr("opacity",1):e.attr("opacity",1),e)))),(e=>e),(e=>e.call((e=>e.transition(t).attr("opacity",0).remove()))))};return p([]),window.addEventListener("tick",(e=>{const a=e.detail.counter+1,n=e.detail.t,s=[...t];s.splice(a),p(s,n)})),h(y,null,h("div",{className:M.calendarLabel},e),o.node())},pe=p(),he=[1,1e4],ue=u("%m/%d/%y"),_e=h(J,null);document.body.appendChild(_e);const me=w(h("svg",l({},{viewBox:[0,0,975,610],id:M.mapSvg}))),we=me.append("g"),ye=O().scaleExtent([1,12]).on("zoom",(({transform:e})=>{we.attr("transform",e)}));me.call(ye);const ve={eventListeners:[["click",function(e){const t=w(this).data()[0].feature,[[a,n],[s,o]]=pe.bounds(t);me.transition().duration(750).call(ye.transform,B.translate(487.5,305).scale(Math.min(8,.9/Math.max((s-a)/975,(o-n)/610))).translate(-(a+s)/2,-(n+o)/2))}],["mouseleave",e=>w(_e).transition().style("opacity",0)],["mouseover",function(e){const[t]=w(this).data();w(_e).transition().duration(0).style("opacity",.75).style("top",e.clientY-100+"px").style("left",`${e.clientX+24}px`).select("p").text(t.label)}]]};(async()=>{const{default:e}=await q((()=>import("./population.c35c5e6c.js")),[]),{default:t}=await q((()=>import("./counties-albers-10m.4f8a6ef5.js")),[]);let a="cases",n=0;const s=N(R).domain(he),o=N(I).domain([1,1e3]),i=(e,t)=>{we.selectAll("path.counties").data(e,(e=>e.id)).join((e=>e.append((e=>h(H,l({d:e,fill:"cases"==a?e.fill:e.deathFill},ve))))),(e=>e.call((e=>e.transition(t).style("fill",(e=>"cases"==a?e.fill:e.deathFill)).style("stroke",(e=>"cases"==a?e.fill:e.deathFill))))),(e=>e.call((e=>e.transition(t).style("opacity",0).remove()))))},c=b().ease(k);i([],c);const r=j(t,t.objects.states).features;we.selectAll("path.states").data(r,(e=>e.properties.name)).join((e=>e.append((e=>h(X,{d:e,eventListeners:[["click",e=>console.log(e)]]})))));const d=j(t,t.objects.counties).features,p=await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_US.csv"),u=await p.text(),_=await fetch("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_US.csv"),m=await _.text(),v=e.slice(1).map((([e,t,a])=>[`${t}${a}`,+e])),f=new Map(v),g=P(u),L=P(m),x=A(d,(e=>e.id)),C=g[0],S=Object.keys(C).filter(ue),E=A(L,(e=>e.UID.slice(3))),D=S.map((e=>[e,g.map((t=>{const a=t.UID.slice(3),n=+t[e]||0,i=+f.get(a)||0,l=(x.get(a)||[])[0]||{properties:{}},c=l.properties.name,r=n/i*1e5,d=t.Province_State,p=`${c} County, ${d}`,h=s(r),u=+E.get(a)[0][e]||0,_=u/i*1e5;return{id:a,cases:r,feature:l,label:p,state:d,pop:i,total:n,fill:h,totalDeaths:u,deathsPerCap:_,deathFill:o(_)}}))])),$=S.map(ue),O=[],B=[],F=[],T=[],Y=[],W=[];D.forEach(((e,t)=>{const a=V(e[1],(e=>e.total)),n=V(e[1],(e=>e.totalDeaths));O.push(a),T.push(n);const s=a-(O[t-1]||0);B.push(s);const o=n-(T[t-1]||0);F.push(o);const i=$[t];Y.push([i,s]),W.push([i,o])}));const J=(e,t)=>{const a=D[e],n=ue(a[0]).toLocaleDateString(),s=z(`#${M.dateLabel}`).text(),o=O[e-1]||0,i=O[e]||0,l=B[e]||0,c=B[e-1]||0,r=T[e-1]||0,d=T[e]||0,p=F[e]||0,h=F[e-1]||0;return n!=s&&(z(`#${M.dateLabel}`).text(n),z(`#${M.totalLabel}`).transition(t).tween("text",(()=>G(o,i))),z(`#${M.deathLabel}`).transition(t).tween("text",(()=>G(r,d))),z(`#${M.newDeaths}`).transition(t).tween("text",(()=>G(h,p))),z(`#${M.newCases}`).transition(t).tween("text",(()=>G(c,l)))),a[1]};i(J(0,c),c),we.selectAll("path.states").raise(),window.addEventListener("tick",(e=>{const t=e.detail.counter;if(t>=D.length)return;n=t;const a=e.detail.t,s=J(t,a);i(s,a)})),window.addEventListener("toggle",(e=>{a=e.detail.state;const t=b().ease(k),s={detail:{counter:n,t:t}};window.dispatchEvent(new CustomEvent("tick",s))}));const K=N(R).domain([1,U(B)]),Z=N(I).domain([1,U(F)]),Q=()=>h(y,null,h("div",{className:M.cal},h(de,{d:Y,color:K},h("label",null,"new cases"),h("h1",{id:M.newCases},"0"))),h("div",{className:M.cal},h(de,{d:W,color:Z,title:"new deaths"},h("label",null,"new deaths"),h("h1",{id:M.newDeaths},"0"))));w(`#${M.calendarContainer}`).append((()=>h(Q,null)))})();var fe=h(y,null,me.node());const ge=e=>{const t=document.createElement("canvas"),a=t.getContext("2d");t.style.width=320,t.style.height=44;for(let n=0;n<320;++n)a.fillStyle=e(n/319),a.fillRect(n,0,1,44);return t},be=({attributes:{domain:e,width:t,color:a,label:n}})=>{const s=w(h("svg",{className:M.legend,viewBox:[0,0,320,44]}));s.append((()=>h("image",{x:0,y:0,width:t,height:44,preserveAspectRatio:"none",href:ge(a).toDataURL()})));const o=N(a).domain(e).range([0,t]).nice();return s.append((()=>h("g",{transform:"translate(0, 20)",className:M.axis}))).call(L(o).ticks(5,"~s")),s.append((()=>h("g",{transform:"translate(0, -8)"}))).append((()=>h("text",{className:M.legendLabel}))).text(n),s.node()};let ke="cases";const Le=()=>h(y,null,h("div",{id:M.map},h("div",{id:M.legends},h("div",{className:M.counter},h("h1",{id:M.title},"COVIZ-19"),h("label",null,"total cases"),h("h1",{id:M.totalLabel},"0"),h("label",null,"total deaths"),h("h1",{id:M.deathLabel},"0")),h("div",{className:M.control},h("button",{id:M.caseSwitch,className:`${M.switches} ${M.selected}`,eventListener:["click",function(){"cases"!=ke&&(ke="cases",w(this).classed(M.selected,!0),w(`#${M.deathSwitch}`).classed(M.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:ke}})))}]},h("h1",null,"Cases")),h(be,{domain:[1,1e4],width:320,color:R,label:"COVID-19 cases per 100k"})),h("div",{className:M.control},h("button",{id:M.deathSwitch,className:`${M.switches}`,eventListener:["click",function(){"deaths"!=ke&&(ke="deaths",w(this).classed(M.selected,!0),w(`#${M.caseSwitch}`).classed(M.selected,!1),window.dispatchEvent(new CustomEvent("toggle",{detail:{state:ke}})))}]},h("h1",null,"Deaths")),h(be,{domain:[1,1e3],width:320,color:I,label:"COVID-19 deaths per 100k"}))),h("div",{id:M.mapContainer},fe)),h("div",{id:M.playback},h("h1",{id:M.dateLabel},"1/22/2020"),h(se,null)));var xe="_footer_1ud2w_3";const Ce=()=>h("div",{className:xe},h("p",null,"created by ",h("a",{href:"https://github.com/ScottORLY/coviz19"},"Scott Orlyck")),h("h4",null,"Data:"),h("p",null,h("a",{href:"https://github.com/CSSEGISandData/COVID-19"},"COVID-19 Data Repository by the Center for Systems Science and Engineering (CSSE) at Johns Hopkins University")),h("p",null,h("a",{href:"https://api.census.gov/data/2018/pep/population?get=POP&for=county"},"US Census")));document.body.appendChild(h("div",{id:F},h(Le,null),h(Ce,null)));
